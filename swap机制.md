# 内存回收
文件页：buffer/cache，可直接回收
***** fsync 赃页同步写入内存
***** pdflush 负责赃页的刷新
匿名页：（堆内存）可能被访问，不能被回收，通过swap写进磁盘，然后释放内存。换出，就是把进程暂时不用的内存数据存储到磁盘中，并释放这些数据占用的内存。
而换入，则是在进程再次访问这些内存的时候，把它们从磁盘读到内存中来。，其实就是通过 Swap 机制，把它们写入磁盘后再释放内存。

# 内存紧张
既然 Swap 是为了回收内存，那么 Linux 到底在什么时候需要回收内存呢？前面一直在说内存资源紧张，又该怎么来衡量内存是不是紧张呢？
***** 直接回收，分配不足时
***** kswapd0监控定期回收
pages_high
pages_low
pages_min
剩余内存小于页最小阈值，说明进程可用内存都耗尽了，只有内核才可以分配内存。剩余内存落在页最小阈值和页低阈值中间，说明内存压力比较大，剩余内存不多了。这时kswapd0 会执行内存回收，直到剩余内存大于高阈值为止。剩余内存落在页低阈值和页高阈值中间，说明内存有一定压力，但还可以满足新内存请
求。
剩余内存大于页高阈值，说明剩余内存比较多，没有内存压力

# NUMA与Swap 
Swap升高，但系统剩余内存高，主流CPU是NUMA架构的，
在 NUMA 架构下，多个处理器被划分到不同 Node 上，且每个 Node 都拥有自己的本地内存空间。
而同一个 Node 内部的内存空间，实际上又可以进一步分为不同的内存域（Zone），比如直接内存访问区（DMA）、普通内存区（NORMAL）、伪内存区（MOVABLE）等。在 NUMA 架构下，每个 Node 都有自己的本地内存空间，而当本地内存不足时，默认既
可以从其他 Node 寻找空闲内存，也可以从本地内存回收
