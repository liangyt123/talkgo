# 什么是中断
中断是种异步事件处理机制，能提高机器的并发能力。为了减少对正常程序的影响，中断程序的处理时间应该很短，中断程序应该很精简。中断为了保护硬件与系统数据一致，当中断处理的时候，会关闭中断。就像打电话一样，此时其他电话打过来，会表示占线。此时其他电话应该要进行重试，当然，重试一直不成功，就会一直丢失中断。
为了达到更快的中断处理，linux把系统中断处理分为上半部与下半部。上半部快速处理中断，下半部延时处理中断。
## 硬中断（上半部）
网卡接收到数据后，会通过硬件中断的形式，通知内核有新的数据到了，内核会调用中断程序来响应这个硬件中断，实际是把网卡信息读到内存中，然后更新下硬件寄存器，表示数据已经读好了，再发出一个软中断信号，通知下一步操作
## 软中断（下半部）
下半部被软中断信号唤醒后，从内存中找到网络数据，再
按照协议栈，对数据一行行解析，直到送到应用程序。而软中断不只是硬件信号，还有内核自定义事件也是软中断，如内核调度，RCU锁(RCU锁，写时拷贝，放在未完成列表中并标记要覆盖的变量，读完进行覆盖)，网络收发，定时
